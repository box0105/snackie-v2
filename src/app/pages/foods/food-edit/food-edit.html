<main>
  <form [formGroup]="applyForm" (ngSubmit)="onSubmit()" class="food-form">
    <h2 class="form-title text-center mb-3">
      Menu @if (isEdit()) { Edit } @else { Add }
    </h2>
    <div class="form-group">
      <label for="fileUpload">圖片</label>

      <!-- fav toggle -->
      <div class="position-relative">
        <app-fav formControlName="isFav"></app-fav>
      </div>

      <!-- img preview -->
      <img
        [src]="previewUrl ?? (applyForm.get('img')?.value
          ? `/images/${applyForm.get('img')?.value}` 
          : '/images/default.jpg')"
        alt="menu cover"
        class="food-img"
      />

      <!-- hidden input -->
      <input
        type="file"
        id="fileUpload"
        (change)="onFileSelected($event)"
        hidden
      />

      <!-- styled input -->
      <label for="fileUpload" class="upload-btn mt-3">
        <i class="fa fa-upload"></i> Upload
      </label>

      <label for="food-name">名稱</label>
      <input id="food-name" type="text" formControlName="name" />

      <label for="food-quote">每日一句</label>
      <textarea
        id="food-quote"
        formControlName="quote"
        rows="3"
        class="mb-1"
      ></textarea>

      <app-prop
        title="水分"
        formControlName="hydrationRating"
        iconClass="fa-droplet wetProp"
      ></app-prop>

      <app-prop
        title="飽食度"
        formControlName="satietyRating"
        iconClass="fa-pizza-slice meatProp"
      ></app-prop>

      <app-prop
        title="價錢"
        formControlName="priceRating"
        iconClass="fa-sack-dollar moneyProp"
      ></app-prop>
    </div>

    <button type="submit" [disabled]="applyForm.invalid">Save</button>
  </form>
</main>
